"use strict";exports.id=395,exports.ids=[395],exports.modules={2395:(t,e,i)=>{i.d(e,{JSONFile:()=>o}),i(3024);var r=i(1455),s=i(6760),n=i(3136);class a{#t;#e;#i=!1;#r=null;#s=null;#n=null;#a=null;#l(t){return this.#a=t,this.#n||=new Promise(((t,e)=>{this.#s=[t,e]})),new Promise(((t,e)=>{this.#n?.then(t).catch(e)}))}async#h(t){this.#i=!0;try{await(0,r.writeFile)(this.#e,t,"utf-8"),await async function(t){for(let e=0;e<10;e++)try{return await t()}catch(t){if(!(e<9))throw t;await new Promise((t=>setTimeout(t,100)))}}((async()=>{await(0,r.rename)(this.#e,this.#t)})),this.#r?.[0]()}catch(t){throw t instanceof Error&&this.#r?.[1](t),t}finally{if(this.#i=!1,this.#r=this.#s,this.#s=this.#n=null,null!==this.#a){const t=this.#a;this.#a=null,await this.write(t)}}}constructor(t){this.#t=t,this.#e=function(t){const e=t instanceof URL?(0,n.fileURLToPath)(t):t.toString();return(0,s.join)((0,s.dirname)(e),`.${(0,s.basename)(e)}.tmp`)}(t)}async write(t){return this.#i?this.#l(t):this.#h(t)}}class l{#t;#o;constructor(t){this.#t=t,this.#o=new a(t)}async read(){let t;try{t=await(0,r.readFile)(this.#t,"utf-8")}catch(t){if("ENOENT"===t.code)return null;throw t}return t}write(t){return this.#o.write(t)}}class h{#c;#u;#w;constructor(t,{parse:e,stringify:i}){this.#c=new l(t),this.#u=e,this.#w=i}async read(){const t=await this.#c.read();return null===t?null:this.#u(t)}write(t){return this.#c.write(this.#w(t))}}class o extends h{constructor(t){super(t,{parse:JSON.parse,stringify:t=>JSON.stringify(t,null,2)})}}}};
//# sourceMappingURL=395.bundle.js.map